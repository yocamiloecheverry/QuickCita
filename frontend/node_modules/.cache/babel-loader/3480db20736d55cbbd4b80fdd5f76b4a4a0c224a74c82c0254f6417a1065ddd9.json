{"ast":null,"code":"import api from \"./api\";\nimport { jwtDecode } from \"jwt-decode\";\nexport const registerUser = async userData => {\n  try {\n    const response = await api.post(\"/usuarios/register\", userData);\n    return response.data;\n  } catch (error) {\n    throw error.response.data;\n  }\n};\n\n// export const loginUser = async (credentials) => {\n//   try {\n//     const response = await api.post(\"/usuarios/login\", credentials);\n//     localStorage.setItem(\"token\", response.data.token);\n//     return response.data;\n//   } catch (error) {\n//     throw error.response.data;\n//   }\n// };\n\nexport const loginUser = async credentials => {\n  try {\n    const response = await api.post(\"/usuarios/login\", credentials);\n    const token = response.data.token;\n    localStorage.setItem(\"token\", token);\n\n    // Configura el header Authorization para la siguiente petici贸n\n    api.defaults.headers.common[\"Authorization\"] = `Bearer ${token}`;\n\n    // Decodifica el token para obtener el id_usuario (puedes usar jwt-decode)\n    const decoded = jwt_decode(token);\n    const id_usuario = decoded.id_usuario;\n\n    // Petici贸n para obtener el perfil completo del usuario\n    const perfilResponse = await api.get(`/usuarios/profile/${id_usuario}`);\n\n    // Retorna el perfil completo\n    return perfilResponse.data;\n  } catch (error) {\n    var _error$response;\n    throw ((_error$response = error.response) === null || _error$response === void 0 ? void 0 : _error$response.data) || error;\n  }\n};\nexport const logoutUser = () => {\n  localStorage.removeItem(\"token\");\n};","map":{"version":3,"names":["api","jwtDecode","registerUser","userData","response","post","data","error","loginUser","credentials","token","localStorage","setItem","defaults","headers","common","decoded","jwt_decode","id_usuario","perfilResponse","get","_error$response","logoutUser","removeItem"],"sources":["C:/Users/dae01/Documents/Universidad/QuickCita/frontend/src/services/authService.js"],"sourcesContent":["import api from \"./api\";\r\nimport { jwtDecode } from \"jwt-decode\";\r\n\r\nexport const registerUser = async (userData) => {\r\n  try {\r\n    const response = await api.post(\"/usuarios/register\", userData);\r\n    return response.data;\r\n  } catch (error) {\r\n    throw error.response.data;\r\n  }\r\n};\r\n\r\n// export const loginUser = async (credentials) => {\r\n//   try {\r\n//     const response = await api.post(\"/usuarios/login\", credentials);\r\n//     localStorage.setItem(\"token\", response.data.token);\r\n//     return response.data;\r\n//   } catch (error) {\r\n//     throw error.response.data;\r\n//   }\r\n// };\r\n\r\nexport const loginUser = async (credentials) => {\r\n  try {\r\n    const response = await api.post(\"/usuarios/login\", credentials);\r\n    const token = response.data.token;\r\n    localStorage.setItem(\"token\", token);\r\n\r\n    // Configura el header Authorization para la siguiente petici贸n\r\n    api.defaults.headers.common[\"Authorization\"] = `Bearer ${token}`;\r\n\r\n    // Decodifica el token para obtener el id_usuario (puedes usar jwt-decode)\r\n    const decoded = jwt_decode(token);\r\n    const id_usuario = decoded.id_usuario;\r\n\r\n    // Petici贸n para obtener el perfil completo del usuario\r\n    const perfilResponse = await api.get(`/usuarios/profile/${id_usuario}`);\r\n\r\n    // Retorna el perfil completo\r\n    return perfilResponse.data;\r\n  } catch (error) {\r\n    throw error.response?.data || error;\r\n  }\r\n};\r\n\r\nexport const logoutUser = () => {\r\n  localStorage.removeItem(\"token\");\r\n};\r\n"],"mappings":"AAAA,OAAOA,GAAG,MAAM,OAAO;AACvB,SAASC,SAAS,QAAQ,YAAY;AAEtC,OAAO,MAAMC,YAAY,GAAG,MAAOC,QAAQ,IAAK;EAC9C,IAAI;IACF,MAAMC,QAAQ,GAAG,MAAMJ,GAAG,CAACK,IAAI,CAAC,oBAAoB,EAAEF,QAAQ,CAAC;IAC/D,OAAOC,QAAQ,CAACE,IAAI;EACtB,CAAC,CAAC,OAAOC,KAAK,EAAE;IACd,MAAMA,KAAK,CAACH,QAAQ,CAACE,IAAI;EAC3B;AACF,CAAC;;AAED;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,OAAO,MAAME,SAAS,GAAG,MAAOC,WAAW,IAAK;EAC9C,IAAI;IACF,MAAML,QAAQ,GAAG,MAAMJ,GAAG,CAACK,IAAI,CAAC,iBAAiB,EAAEI,WAAW,CAAC;IAC/D,MAAMC,KAAK,GAAGN,QAAQ,CAACE,IAAI,CAACI,KAAK;IACjCC,YAAY,CAACC,OAAO,CAAC,OAAO,EAAEF,KAAK,CAAC;;IAEpC;IACAV,GAAG,CAACa,QAAQ,CAACC,OAAO,CAACC,MAAM,CAAC,eAAe,CAAC,GAAG,UAAUL,KAAK,EAAE;;IAEhE;IACA,MAAMM,OAAO,GAAGC,UAAU,CAACP,KAAK,CAAC;IACjC,MAAMQ,UAAU,GAAGF,OAAO,CAACE,UAAU;;IAErC;IACA,MAAMC,cAAc,GAAG,MAAMnB,GAAG,CAACoB,GAAG,CAAC,qBAAqBF,UAAU,EAAE,CAAC;;IAEvE;IACA,OAAOC,cAAc,CAACb,IAAI;EAC5B,CAAC,CAAC,OAAOC,KAAK,EAAE;IAAA,IAAAc,eAAA;IACd,MAAM,EAAAA,eAAA,GAAAd,KAAK,CAACH,QAAQ,cAAAiB,eAAA,uBAAdA,eAAA,CAAgBf,IAAI,KAAIC,KAAK;EACrC;AACF,CAAC;AAED,OAAO,MAAMe,UAAU,GAAGA,CAAA,KAAM;EAC9BX,YAAY,CAACY,UAAU,CAAC,OAAO,CAAC;AAClC,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}